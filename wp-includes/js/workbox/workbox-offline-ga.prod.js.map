{"version":3,"names":[],"mappings":"","sources":["packages/workbox-google-analytics/browser.mjs"],"sourcesContent":["this.workbox=this.workbox||{},this.workbox.googleAnalytics=function(t,e,o,n,c,a,r){\"use strict\";try{self.workbox.v[\"workbox:google-analytics:4.0.0-beta.0\"]=1}catch(t){}const w=/^\\/(\\w+\\/)?collect/;return t.initialize=((t={})=>{const s=o.cacheNames.getGoogleAnalyticsName(t.cacheName),i=new e.Plugin(\"workbox-google-analytics\",{maxRetentionTime:2880,onSync:(t=>async({queue:e})=>{let o;for(;o=await e.shiftRequest();){const{request:n,timestamp:c}=o,a=new URL(n.url);try{const r=\"POST\"===n.method?new URLSearchParams(await n.text()):a.searchParams,w=c-(Number(r.get(\"qt\"))||0),s=Date.now()-w;if(r.set(\"qt\",s),t.parameterOverrides)for(const e of Object.keys(t.parameterOverrides)){const o=t.parameterOverrides[e];r.set(e,o)}\"function\"==typeof t.hitFilter&&t.hitFilter.call(null,r),await fetch(new Request(a.origin+a.pathname,{body:r.toString(),method:\"POST\",mode:\"cors\",credentials:\"omit\",headers:{\"Content-Type\":\"text/plain\"}}))}catch(t){return void await e.unshiftRequest(o)}}})(t)}),l=[(t=>{const e=new a.NetworkFirst({cacheName:t});return new n.Route(({url:t})=>\"www.google-analytics.com\"===t.hostname&&\"/analytics.js\"===t.pathname,e,\"GET\")})(s),(t=>{const e=new a.NetworkFirst({cacheName:t});return new n.Route(({url:t})=>\"www.googletagmanager.com\"===t.hostname&&\"/gtag/js\"===t.pathname,e,\"GET\")})(s),...(t=>{const e=({url:t})=>\"www.google-analytics.com\"===t.hostname&&w.test(t.pathname),o=new r.NetworkOnly({plugins:[t]});return[new n.Route(e,o,\"GET\"),new n.Route(e,o,\"POST\")]})(i)],u=new c.Router;for(const t of l)u.registerRoute(t);u.addFetchListener()}),t}({},workbox.backgroundSync,workbox.core._private,workbox.routing,workbox.routing,workbox.strategies,workbox.strategies);\n"],"file":"workbox-offline-ga.prod.js"}